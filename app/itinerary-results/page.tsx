"use client"

import { useState, useEffect } from "react"
import { useRouter } from "next/navigation"
import Link from "next/link"
import { Button } from "../../components/ui/button"
import { Card, CardContent, CardHeader, CardTitle } from "../../components/ui/card"
import { Download, Printer, Save, RotateCcw, Plane, X, Eye } from "lucide-react"
import { useLanguageStore } from "../../lib/language-store"

// 다국어 지원
const translations = {
  ko: {
    title: "🎉 추천 여행 일정",
    subtitle: "AI가 생성한 완벽한 맞춤형 여행 일정을 확인하세요 ✨",
    customSchedule: "🎯 나만의 맞춤 일정 만들기",
    customScheduleDesc: "아래에서 원하는 여행지와 음식점을 선택하면, AI가 최적의 동선으로 새로운 일정을 생성해드립니다.",
    selectedItems: "현재 선택된 항목",
    regenerateBtn: "✨ 혼합 일정 재생성하기",
    itinerary1: "🌟 추천 일정 1",
    itinerary2: "🌟 추천 일정 2",
    detailView: "자세히 보기",
    attractions: "볼거리 (명소)",
    restaurants: "먹거리 (음식점 또는 음식)",
    save: "일정 저장",
    download: "일정 다운로드",
    print: "바로 프린터"
  },
  en: {
    title: "🎉 Recommended Travel Itinerary",
    subtitle: "Check out the perfect customized travel itinerary generated by AI ✨",
    customSchedule: "🎯 Create Your Custom Itinerary",
    customScheduleDesc: "Select your desired destinations and restaurants below, and AI will generate a new itinerary with optimal routes.",
    selectedItems: "Currently selected items",
    regenerateBtn: "✨ Regenerate Mixed Itinerary",
    itinerary1: "🌟 Recommended Itinerary 1",
    itinerary2: "🌟 Recommended Itinerary 2",
    detailView: "View Details",
    attractions: "Attractions (Places to Visit)",
    restaurants: "Food (Restaurants or Cuisine)",
    save: "Save Itinerary",
    download: "Download Itinerary",
    print: "Print Directly"
  },
  ja: {
    title: "🎉 おすすめ旅行プラン",
    subtitle: "AIが生成した完璧なカスタマイズ旅行プランをご確認ください ✨",
    customSchedule: "🎯 オリジナルプラン作成",
    customScheduleDesc: "下記から希望する観光地とレストランを選択すると、AIが最適なルートで新しいプランを生成します。",
    selectedItems: "現在選択中のアイテム",
    regenerateBtn: "✨ ミックスプラン再生成",
    itinerary1: "🌟 おすすめプラン 1",
    itinerary2: "🌟 おすすめプラン 2",
    detailView: "詳細表示",
    attractions: "観光地 (見どころ)",
    restaurants: "グルメ (レストランまたは料理)",
    save: "プラン保存",
    download: "プランダウンロード",
    print: "直接印刷"
  },
  zh: {
    title: "🎉 推荐旅行行程",
    subtitle: "查看AI生成的完美定制旅行行程 ✨",
    customSchedule: "🎯 制定专属行程",
    customScheduleDesc: "从下方选择您想要的旅游景点和餐厅，AI将生成最优路线的新行程。",
    selectedItems: "当前选择的项目",
    regenerateBtn: "✨ 重新生成混合行程",
    itinerary1: "🌟 推荐行程 1",
    itinerary2: "🌟 推荐行程 2",
    detailView: "查看详情",
    attractions: "景点 (观光地)",
    restaurants: "美食 (餐厅或料理)",
    save: "保存行程",
    download: "下载行程",
    print: "直接打印"
  },
  vi: {
    title: "🎉 Lịch Trình Du Lịch Đề Xuất",
    subtitle: "Xem lịch trình du lịch tùy chỉnh hoàn hảo được tạo bởi AI ✨",
    customSchedule: "🎯 Tạo Lịch Trình Riêng",
    customScheduleDesc: "Chọn các điểm đến và nhà hàng mong muốn bên dưới, AI sẽ tạo lịch trình mới với tuyến đường tối ưu.",
    selectedItems: "Các mục hiện được chọn",
    regenerateBtn: "✨ Tạo Lại Lịch Trình Hỗn Hợp",
    itinerary1: "🌟 Lịch Trình Đề Xuất 1",
    itinerary2: "🌟 Lịch Trình Đề Xuất 2",
    detailView: "Xem Chi Tiết",
    attractions: "Điểm Tham Quan (Danh Lam)",
    restaurants: "Ẩm Thực (Nhà Hàng hoặc Món Ăn)",
    save: "Lưu Lịch Trình",
    download: "Tải Lịch Trình",
    print: "In Trực Tiếp"
  },
  id: {
    title: "🎉 Itinerary Perjalanan yang Direkomendasikan",
    subtitle: "Lihat itinerary perjalanan kustom sempurna yang dibuat oleh AI ✨",
    customSchedule: "🎯 Buat Itinerary Pribadi",
    customScheduleDesc: "Pilih destinasi dan restoran yang diinginkan di bawah, AI akan membuat itinerary baru dengan rute optimal.",
    selectedItems: "Item yang dipilih saat ini",
    regenerateBtn: "✨ Buat Ulang Itinerary Campuran",
    itinerary1: "🌟 Itinerary Rekomendasi 1",
    itinerary2: "🌟 Itinerary Rekomendasi 2",
    detailView: "Lihat Detail",
    attractions: "Tempat Wisata (Objek Wisata)",
    restaurants: "Kuliner (Restoran atau Masakan)",
    save: "Simpan Itinerary",
    download: "Unduh Itinerary",
    print: "Cetak Langsung"
  }
}

// 모달 컴포넌트
function DetailModal({ isOpen, onClose, title, children }: { 
  isOpen: boolean; 
  onClose: () => void; 
  title: string; 
  children: React.ReactNode;
}) {
  if (!isOpen) return null;

  const handleSaveSchedule = () => {
    alert("일정이 저장되었습니다! 💾")
  }

  const handleDownload = () => {
    alert("일정이 다운로드됩니다! 📱")
  }

  const handlePrint = () => {
    window.print()
  }

  return (
    <div className="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4">
      <div className="bg-white dark:bg-gray-800 rounded-lg max-w-2xl w-full max-h-[90vh] overflow-y-auto">
        <div className="flex justify-between items-center p-6 border-b">
          <h2 className="text-2xl font-bold">{title} - 상세 정보</h2>
          <Button variant="ghost" size="sm" onClick={onClose}>
            <X className="w-4 h-4" />
          </Button>
        </div>
        <div className="p-6">
          {children}
          
          {/* 모달 내 액션 버튼들 */}
          <div className="flex flex-wrap gap-4 mt-6 pt-6 border-t">
            <Button onClick={handleSaveSchedule} className="flex items-center space-x-2 bg-blue-600 hover:bg-blue-700">
              <Save className="w-4 h-4" />
              <span>일정 저장</span>
            </Button>
            <Button onClick={handleDownload} className="flex items-center space-x-2 bg-green-600 hover:bg-green-700">
              <Download className="w-4 h-4" />
              <span>일정 다운로드</span>
            </Button>
            <Button onClick={handlePrint} variant="outline" className="flex items-center space-x-2">
              <Printer className="w-4 h-4" />
              <span>바로 프린터</span>
            </Button>
          </div>
        </div>
      </div>
    </div>
  )
}

export default function ItineraryResultsPage() {
  const [selectedItems, setSelectedItems] = useState<Set<string>>(new Set())
  const [modalData, setModalData] = useState<{
    isOpen: boolean;
    title: string;
    content: React.ReactNode;
  }>({
    isOpen: false,
    title: "",
    content: null
  })

  const { language } = useLanguageStore()
  const t = translations[language as keyof typeof translations]

  const router = useRouter();
  useEffect(() => {
    const result = localStorage.getItem("itineraryResult");
    if (result) {
      try {
        const data = JSON.parse(result);
        if (data.status === "fallback" || data.error_message) {
          alert("죄송합니다. 일시적인 오류로 인해 여행 일정을 생성하지 못했습니다.");
          router.replace("/create-itinerary");
        }
      } catch (e) {
        // 파싱 에러 등 예외 무시
      }
    }
  }, []);

  const handleCheckboxChange = (itemId: string) => {
    const newSelected = new Set(selectedItems)
    if (newSelected.has(itemId)) {
      newSelected.delete(itemId)
    } else {
      newSelected.add(itemId)
    }
    setSelectedItems(newSelected)
  }

  const handleCreateCustomSchedule = () => {
    if (selectedItems.size === 0) {
      alert("최소 1개 이상의 항목을 선택해주세요!")
      return
    }
    alert(`선택된 ${selectedItems.size}개 항목으로 커스텀 일정이 생성됩니다! ✨`)
  }

  const openModal = (title: string, content: React.ReactNode) => {
    setModalData({
      isOpen: true,
      title,
      content
    })
  }

  const closeModal = () => {
    setModalData({
      isOpen: false,
      title: "",
      content: null
    })
  }

  const getDetailContent1 = () => (
    <div className="space-y-6">
      {/* 경복궁 상세 정보 */}
      <div className="border-b pb-4">
        <h3 className="text-xl font-bold mb-3">경복궁</h3>
        <div className="mb-4 p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg">
          <p className="text-gray-700 dark:text-gray-300 leading-relaxed">
            조선왕조 제1궁궐로 1395년에 창건된 한국의 대표적인 고궁입니다. 
            근정전, 경회루, 향원정 등 아름다운 전각들이 조화를 이루며, 
            특히 가을 단풍과 겨울 설경이 장관을 이룹니다. 
            수문장 교대의식은 조선시대 궁궐 수비 의식을 재현한 것으로 매일 관람할 수 있습니다.
          </p>
        </div>
        <div className="grid md:grid-cols-2 gap-4">
          <div>
            <p className="mb-2"><strong>운영시간:</strong> 09:00 - 18:00</p>
            <p className="mb-2"><strong>입장료:</strong> 성인 3,000원</p>
            <p className="mb-2"><strong>추천시간:</strong> 2시간</p>
            <p className="mb-2"><strong>특별프로그램:</strong> 수문장 교대식 (매시 정각)</p>
          </div>
          <div>
            <p className="mb-2"><strong>사진 URL:</strong></p>
            <div className="text-sm text-blue-600 space-y-1">
              <p>• https://example.com/photos/gyeongbok-1.jpg</p>
              <p>• https://example.com/photos/gyeongbok-2.jpg</p>
              <p>• https://example.com/photos/gyeongbok-ceremony.jpg</p>
            </div>
          </div>
        </div>
      </div>

      {/* 남산타워 상세 정보 */}
      <div className="border-b pb-4">
        <h3 className="text-xl font-bold mb-3">남산타워</h3>
        <div className="mb-4 p-4 bg-green-50 dark:bg-green-900/20 rounded-lg">
          <p className="text-gray-700 dark:text-gray-300 leading-relaxed">
            서울의 상징적인 랜드마크로 해발 262m 남산 정상에 위치한 종합전파탑입니다. 
            서울 전체를 한눈에 내려다볼 수 있는 최고의 전망대이며, 
            특히 야간에는 서울의 화려한 야경을 감상할 수 있습니다. 
            연인들의 사랑의 맹세 장소로도 유명하며, 케이블카를 타고 올라가는 재미도 쏠쏠합니다.
          </p>
        </div>
        <div className="grid md:grid-cols-2 gap-4">
          <div>
            <p className="mb-2"><strong>운영시간:</strong> 10:00 - 23:00</p>
            <p className="mb-2"><strong>입장료:</strong> 성인 12,000원</p>
            <p className="mb-2"><strong>추천시간:</strong> 1.5시간</p>
            <p className="mb-2"><strong>특별체험:</strong> 사랑의 자물쇠, 케이블카</p>
          </div>
          <div>
            <p className="mb-2"><strong>사진 URL:</strong></p>
            <div className="text-sm text-blue-600 space-y-1">
              <p>• https://example.com/photos/namsan-tower-1.jpg</p>
              <p>• https://example.com/photos/namsan-night.jpg</p>
              <p>• https://example.com/photos/namsan-cable.jpg</p>
            </div>
          </div>
        </div>
      </div>

      {/* 음식점 상세 정보 */}
      <div className="border-b pb-4">
        <h3 className="text-xl font-bold mb-3">인사동 전통차집</h3>
        <div className="mb-4 p-4 bg-orange-50 dark:bg-orange-900/20 rounded-lg">
          <p className="text-gray-700 dark:text-gray-300 leading-relaxed">
            전통과 현대가 어우러진 서울의 대표적인 문화의 거리, 인사동에 위치한 전통차집입니다. 
            한국 전통 공예품, 골동품, 서예용품 등을 판매하는 상점들이 즐비하며, 
            전통차를 마실 수 있는 찻집과 한식당이 많습니다. 
            주말에는 거리 공연도 볼 수 있어 한국의 전통문화를 체험하기에 최적의 장소입니다.
          </p>
        </div>
        <div className="grid md:grid-cols-2 gap-4">
          <div>
            <p className="mb-2"><strong>추천메뉴:</strong> 대추차, 전통한과세트</p>
            <p className="mb-2"><strong>가격대:</strong> 15,000원 - 25,000원</p>
            <p className="mb-2"><strong>분위기:</strong> 전통 한옥, 조용한 분위기</p>
          </div>
          <div>
            <p className="mb-2"><strong>사진 URL:</strong></p>
            <div className="text-sm text-blue-600 space-y-1">
              <p>• https://example.com/photos/insadong-tea-1.jpg</p>
              <p>• https://example.com/photos/insadong-tea-2.jpg</p>
            </div>
          </div>
        </div>
      </div>

      <div>
        <h3 className="text-xl font-bold mb-3">명동 칼국수</h3>
        <div className="mb-4 p-4 bg-yellow-50 dark:bg-yellow-900/20 rounded-lg">
          <p className="text-gray-700 dark:text-gray-300 leading-relaxed">
            서울 중심부 명동에 위치한 50년 전통의 현지인 맛집입니다. 
            진한 멸치 육수로 끓인 칼국수와 손으로 빚은 만두가 유명하며, 
            저렴한 가격에 푸짐한 양으로 많은 현지인들이 찾는 숨은 맛집입니다. 
            쇼핑 후 간단한 한끼로 안성맞춤인 곳입니다.
          </p>
        </div>
        <div className="grid md:grid-cols-2 gap-4">
          <div>
            <p className="mb-2"><strong>추천메뉴:</strong> 멸치칼국수, 만두</p>
            <p className="mb-2"><strong>가격대:</strong> 8,000원 - 12,000원</p>
            <p className="mb-2"><strong>특징:</strong> 50년 전통, 현지인 맛집</p>
          </div>
          <div>
            <p className="mb-2"><strong>사진 URL:</strong></p>
            <div className="text-sm text-blue-600 space-y-1">
              <p>• https://example.com/photos/myeongdong-noodle-1.jpg</p>
              <p>• https://example.com/photos/myeongdong-noodle-2.jpg</p>
            </div>
          </div>
        </div>
      </div>
    </div>
  )

  const getDetailContent2 = () => (
    <div className="space-y-6">
      {/* 한강공원 상세 정보 */}
      <div className="border-b pb-4">
        <h3 className="text-xl font-bold mb-3">한강공원</h3>
        <div className="mb-4 p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg">
          <p className="text-gray-700 dark:text-gray-300 leading-relaxed">
            서울을 관통하는 한강변에 조성된 대규모 시민 휴식공간입니다. 
            자전거 라이딩, 피크닉, 치킨과 맥주를 즐기는 치맥 문화의 성지로 유명하며, 
            특히 야경이 아름다워 연인들의 데이트 코스로도 인기가 높습니다. 
            한강 유람선을 타고 서울의 스카이라인을 감상하는 것도 특별한 경험입니다.
          </p>
        </div>
        <div className="grid md:grid-cols-2 gap-4">
          <div>
            <p className="mb-2"><strong>운영시간:</strong> 24시간</p>
            <p className="mb-2"><strong>추천활동:</strong> 자전거, 피크닉, 치킨&맥주</p>
            <p className="mb-2"><strong>자전거대여:</strong> 시간당 3,000원</p>
            <p className="mb-2"><strong>특별체험:</strong> 한강 유람선, 수상스키</p>
          </div>
          <div>
            <p className="mb-2"><strong>사진 URL:</strong></p>
            <div className="text-sm text-blue-600 space-y-1">
              <p>• https://example.com/photos/hangang-park-1.jpg</p>
              <p>• https://example.com/photos/hangang-bike.jpg</p>
              <p>• https://example.com/photos/hangang-sunset.jpg</p>
            </div>
          </div>
        </div>
      </div>

      {/* 동대문 상세 정보 */}
      <div className="border-b pb-4">
        <h3 className="text-xl font-bold mb-3">동대문 야시장</h3>
        <div className="grid md:grid-cols-2 gap-4">
          <div>
            <p className="mb-2"><strong>운영시간:</strong> 19:00 - 05:00</p>
            <p className="mb-2"><strong>추천쇼핑:</strong> 의류, 액세서리, 신발</p>
            <p className="mb-2"><strong>야식:</strong> 떡볶이, 순대, 호떡</p>
            <p className="mb-2"><strong>특징:</strong> 24시간 쇼핑몰, 도매가격</p>
          </div>
          <div>
            <p className="mb-2"><strong>사진 URL:</strong></p>
            <div className="text-sm text-blue-600 space-y-1">
              <p>• https://example.com/photos/dongdaemun-night-1.jpg</p>
              <p>• https://example.com/photos/dongdaemun-shopping.jpg</p>
              <p>• https://example.com/photos/dongdaemun-food.jpg</p>
            </div>
          </div>
        </div>
      </div>

      {/* 음식점 상세 정보 */}
      <div className="border-b pb-4">
        <h3 className="text-xl font-bold mb-3">홍대 맛집 투어</h3>
        <div className="grid md:grid-cols-2 gap-4">
          <div>
            <p className="mb-2"><strong>추천메뉴:</strong> 파스타, 피자, 수제버거</p>
            <p className="mb-2"><strong>가격대:</strong> 15,000원 - 30,000원</p>
            <p className="mb-2"><strong>분위기:</strong> 젊고 활기찬, 인스타 핫플</p>
          </div>
          <div>
            <p className="mb-2"><strong>사진 URL:</strong></p>
            <div className="text-sm text-blue-600 space-y-1">
              <p>• https://example.com/photos/hongdae-food-1.jpg</p>
              <p>• https://example.com/photos/hongdae-food-2.jpg</p>
            </div>
          </div>
        </div>
      </div>

      <div>
        <h3 className="text-xl font-bold mb-3">이태원 세계음식</h3>
        <div className="grid md:grid-cols-2 gap-4">
          <div>
            <p className="mb-2"><strong>추천메뉴:</strong> 인도카레, 터키케밥, 태국음식</p>
            <p className="mb-2"><strong>가격대:</strong> 12,000원 - 25,000원</p>
            <p className="mb-2"><strong>특징:</strong> 다국적 문화, 할랄음식 가능</p>
          </div>
          <div>
            <p className="mb-2"><strong>사진 URL:</strong></p>
            <div className="text-sm text-blue-600 space-y-1">
              <p>• https://example.com/photos/itaewon-world-food-1.jpg</p>
              <p>• https://example.com/photos/itaewon-world-food-2.jpg</p>
            </div>
          </div>
        </div>
      </div>
    </div>
  )

  return (
    <div className="min-h-screen bg-gradient-to-br from-blue-50 via-purple-50 to-green-50 dark:from-gray-900 dark:via-purple-900/20 dark:to-blue-900/20 py-12">
      <div className="container mx-auto px-4">
        <div className="text-center mb-8">
          <Link href="/" className="flex items-center justify-center space-x-3 mb-8">
            <div className="w-10 h-10 bg-gradient-to-br from-blue-600 to-purple-600 rounded-xl flex items-center justify-center">
              <Plane className="w-6 h-6 text-white transform rotate-45" />
            </div>
            <span className="text-2xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent">
              Plan Go
            </span>
          </Link>
          <h1 className="text-5xl font-bold mb-6 bg-gradient-to-r from-purple-600 to-pink-600 bg-clip-text text-transparent">
            {t.title}
          </h1>
          <p className="text-xl text-gray-600 dark:text-gray-300 mb-8">{t.subtitle}</p>
          
          {/* 혼합 일정 생성 섹션을 상단으로 이동 - 항상 표시 */}
                      <div className="bg-white/80 dark:bg-gray-800/80 backdrop-blur-sm rounded-2xl p-6 shadow-xl mb-8">
              <div className="mb-4">
                <h2 className="text-2xl font-bold text-gray-800 dark:text-gray-200 mb-2">
                  {t.customSchedule}
                </h2>
                <p className="text-gray-600 dark:text-gray-300">
                  {t.customScheduleDesc}
                </p>
                <span className="inline-block mt-3 text-lg font-semibold text-purple-600 dark:text-purple-400">
                  {t.selectedItems}: {selectedItems.size}개
                </span>
              </div>
              <Button 
                onClick={handleCreateCustomSchedule}
                className="bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-700 hover:to-pink-700 text-white px-8 py-3 text-lg shadow-xl"
              >
                {t.regenerateBtn}
              </Button>
            </div>
        </div>

        <div className="grid lg:grid-cols-2 gap-8">
          {/* Itinerary 1 */}
          <Card className="shadow-2xl border-0 bg-white/90 dark:bg-gray-800/90 backdrop-blur-sm">
            <CardHeader className="bg-gradient-to-r from-blue-500 to-purple-500 text-white">
              <CardTitle className="text-3xl text-center">{t.itinerary1}</CardTitle>
              
              {/* 전체 여행 경로 */}
              <div className="mt-4 p-4 bg-white/20 rounded-lg">
                <h4 className="font-bold text-lg mb-3">📍 전체 여행 경로</h4>
                <div className="flex items-center justify-between text-sm">
                  <div className="text-center">
                    <div className="w-8 h-8 bg-white rounded-full flex items-center justify-center text-blue-600 font-bold mb-1">
                      1
                    </div>
                    <span>경복궁</span>
                  </div>
                  <div className="flex-1 h-0.5 bg-white/50 mx-2"></div>
                  <div className="text-center">
                    <div className="w-8 h-8 bg-white rounded-full flex items-center justify-center text-blue-600 font-bold mb-1">
                      2
                    </div>
                    <span>인사동</span>
                  </div>
                  <div className="flex-1 h-0.5 bg-white/50 mx-2"></div>
                  <div className="text-center">
                    <div className="w-8 h-8 bg-white rounded-full flex items-center justify-center text-blue-600 font-bold mb-1">
                      3
                    </div>
                    <span>명동</span>
                  </div>
                  <div className="flex-1 h-0.5 bg-white/50 mx-2"></div>
                  <div className="text-center">
                    <div className="w-8 h-8 bg-white rounded-full flex items-center justify-center text-blue-600 font-bold mb-1">
                      4
                    </div>
                    <span>남산타워</span>
                  </div>
                </div>
                <p className="text-center mt-3 text-sm">총 거리: 약 15km | 예상 소요시간: 1일</p>
              </div>
            </CardHeader>
            <CardContent className="space-y-8 p-6">
              <div className="flex justify-between items-center">
                <h3 className="text-xl font-bold text-green-600 dark:text-green-400">여행 일정 선택</h3>
                <Button 
                  onClick={() => openModal(t.itinerary1, getDetailContent1())} 
                  variant="outline" 
                  size="sm"
                  className="flex items-center space-x-2"
                >
                  <Eye className="w-4 h-4" />
                  <span>{t.detailView}</span>
                </Button>
              </div>

              {/* 볼거리 */}
              <div>
                <h3 className="text-xl font-bold mb-4 text-green-600 dark:text-green-400">{t.attractions}</h3>
                <div className="space-y-4">
                  <div className="flex space-x-4">
                    <input
                      type="checkbox"
                      checked={selectedItems.has("1-palace")}
                      onChange={() => handleCheckboxChange("1-palace")}
                      className="mt-1 h-4 w-4"
                    />
                    <div className="w-16 h-16 bg-gray-200 dark:bg-gray-600 rounded flex-shrink-0"></div>
                    <div>
                      <h4 className="font-bold text-gray-900 dark:text-gray-100">경복궁</h4>
                      <p className="text-sm text-gray-600 dark:text-gray-300 mb-2">
                        조선왕조의 정궁으로 한국의 전통 건축미를 감상할 수 있습니다.
                      </p>
                    </div>
                  </div>
                  <div className="flex space-x-4">
                    <input
                      type="checkbox"
                      checked={selectedItems.has("1-tower")}
                      onChange={() => handleCheckboxChange("1-tower")}
                      className="mt-1 h-4 w-4"
                    />
                    <div className="w-16 h-16 bg-gray-200 dark:bg-gray-600 rounded flex-shrink-0"></div>
                    <div>
                      <h4 className="font-bold text-gray-900 dark:text-gray-100">남산타워</h4>
                      <p className="text-sm text-gray-600 dark:text-gray-300 mb-2">
                        서울의 야경을 한눈에 볼 수 있는 최고의 전망대입니다.
                      </p>
                    </div>
                  </div>
                </div>
              </div>

              {/* 먹거리 */}
              <div>
                <h3 className="text-xl font-bold mb-4 text-green-600 dark:text-green-400">{t.restaurants}</h3>
                <div className="space-y-4">
                  <div className="flex space-x-4">
                    <input
                      type="checkbox"
                      checked={selectedItems.has("1-food1")}
                      onChange={() => handleCheckboxChange("1-food1")}
                      className="mt-1 h-4 w-4"
                    />
                    <div className="w-16 h-16 bg-gray-200 dark:bg-gray-600 rounded flex-shrink-0"></div>
                    <div>
                      <h4 className="font-bold text-gray-900 dark:text-gray-100">인사동 전통차집</h4>
                      <p className="text-sm text-gray-600 dark:text-gray-300 mb-2">
                        전통 한과와 차를 즐길 수 있는 고즈넉한 찻집입니다.
                      </p>
                    </div>
                  </div>
                  <div className="flex space-x-4">
                    <input
                      type="checkbox"
                      checked={selectedItems.has("1-food2")}
                      onChange={() => handleCheckboxChange("1-food2")}
                      className="mt-1 h-4 w-4"
                    />
                    <div className="w-16 h-16 bg-gray-200 dark:bg-gray-600 rounded flex-shrink-0"></div>
                    <div>
                      <h4 className="font-bold text-gray-900 dark:text-gray-100">명동 칼국수</h4>
                      <p className="text-sm text-gray-600 dark:text-gray-300 mb-2">
                        50년 전통의 손칼국수를 맛볼 수 있는 명동 맛집입니다.
                      </p>
                    </div>
                  </div>
                </div>
              </div>
            </CardContent>
          </Card>

          {/* Itinerary 2 */}
          <Card className="shadow-2xl border-0 bg-white/90 dark:bg-gray-800/90 backdrop-blur-sm">
            <CardHeader className="bg-gradient-to-r from-green-500 to-teal-500 text-white">
              <CardTitle className="text-3xl text-center">{t.itinerary2}</CardTitle>

              {/* 전체 여행 경로 */}
              <div className="mt-4 p-4 bg-white/20 rounded-lg">
                <h4 className="font-bold text-lg mb-3">📍 전체 여행 경로</h4>
                <div className="flex items-center justify-between text-sm">
                  <div className="text-center">
                    <div className="w-8 h-8 bg-white rounded-full flex items-center justify-center text-green-600 font-bold mb-1">
                      1
                    </div>
                    <span>한강공원</span>
                  </div>
                  <div className="flex-1 h-0.5 bg-white/50 mx-2"></div>
                  <div className="text-center">
                    <div className="w-8 h-8 bg-white rounded-full flex items-center justify-center text-green-600 font-bold mb-1">
                      2
                    </div>
                    <span>홍대</span>
                  </div>
                  <div className="flex-1 h-0.5 bg-white/50 mx-2"></div>
                  <div className="text-center">
                    <div className="w-8 h-8 bg-white rounded-full flex items-center justify-center text-green-600 font-bold mb-1">
                      3
                    </div>
                    <span>이태원</span>
                  </div>
                  <div className="flex-1 h-0.5 bg-white/50 mx-2"></div>
                  <div className="text-center">
                    <div className="w-8 h-8 bg-white rounded-full flex items-center justify-center text-green-600 font-bold mb-1">
                      4
                    </div>
                    <span>동대문</span>
                  </div>
                </div>
                <p className="text-center mt-3 text-sm">총 거리: 약 20km | 예상 소요시간: 1일</p>
              </div>
            </CardHeader>
            <CardContent className="space-y-8 p-6">
              <div className="flex justify-between items-center">
                <h3 className="text-xl font-bold text-green-600 dark:text-green-400">여행 일정 선택</h3>
                <Button 
                  onClick={() => openModal(t.itinerary2, getDetailContent2())} 
                  variant="outline" 
                  size="sm"
                  className="flex items-center space-x-2"
                >
                  <Eye className="w-4 h-4" />
                  <span>{t.detailView}</span>
                </Button>
              </div>

              {/* 볼거리 */}
              <div>
                <h3 className="text-xl font-bold mb-4 text-green-600 dark:text-green-400">{t.attractions}</h3>
                <div className="space-y-4">
                  <div className="flex space-x-4">
                    <input
                      type="checkbox"
                      checked={selectedItems.has("2-park")}
                      onChange={() => handleCheckboxChange("2-park")}
                      className="mt-1 h-4 w-4"
                    />
                    <div className="w-16 h-16 bg-gray-200 dark:bg-gray-600 rounded flex-shrink-0"></div>
                    <div>
                      <h4 className="font-bold text-gray-900 dark:text-gray-100">한강공원</h4>
                      <p className="text-sm text-gray-600 dark:text-gray-300 mb-2">
                        한강에서 자전거를 타며 여유로운 시간을 보낼 수 있습니다.
                      </p>
                    </div>
                  </div>
                  <div className="flex space-x-4">
                    <input
                      type="checkbox"
                      checked={selectedItems.has("2-dongdaemun")}
                      onChange={() => handleCheckboxChange("2-dongdaemun")}
                      className="mt-1 h-4 w-4"
                    />
                    <div className="w-16 h-16 bg-gray-200 dark:bg-gray-600 rounded flex-shrink-0"></div>
                    <div>
                      <h4 className="font-bold text-gray-900 dark:text-gray-100">동대문 야시장</h4>
                      <p className="text-sm text-gray-600 dark:text-gray-300 mb-2">
                        밤늦게까지 열리는 쇼핑과 야식의 천국입니다.
                      </p>
                    </div>
                  </div>
                </div>
              </div>

              {/* 먹거리 */}
              <div>
                <h3 className="text-xl font-bold mb-4 text-green-600 dark:text-green-400">{t.restaurants}</h3>
                <div className="space-y-4">
                  <div className="flex space-x-4">
                    <input
                      type="checkbox"
                      checked={selectedItems.has("2-food1")}
                      onChange={() => handleCheckboxChange("2-food1")}
                      className="mt-1 h-4 w-4"
                    />
                    <div className="w-16 h-16 bg-gray-200 dark:bg-gray-600 rounded flex-shrink-0"></div>
                    <div>
                      <h4 className="font-bold text-gray-900 dark:text-gray-100">홍대 맛집 투어</h4>
                      <p className="text-sm text-gray-600 dark:text-gray-300 mb-2">
                        젊음의 거리 홍대에서 다양한 퓨전 요리를 즐겨보세요.
                      </p>
                    </div>
                  </div>
                  <div className="flex space-x-4">
                    <input
                      type="checkbox"
                      checked={selectedItems.has("2-food2")}
                      onChange={() => handleCheckboxChange("2-food2")}
                      className="mt-1 h-4 w-4"
                    />
                    <div className="w-16 h-16 bg-gray-200 dark:bg-gray-600 rounded flex-shrink-0"></div>
                    <div>
                      <h4 className="font-bold text-gray-900 dark:text-gray-100">이태원 세계음식</h4>
                      <p className="text-sm text-gray-600 dark:text-gray-300 mb-2">
                        세계 각국의 정통 요리를 한 곳에서 맛볼 수 있습니다.
                      </p>
                    </div>
                  </div>
                </div>
              </div>
            </CardContent>
          </Card>
        </div>

        {/* 모달 */}
        <DetailModal 
          isOpen={modalData.isOpen}
          onClose={closeModal}
          title={modalData.title}
        >
          {modalData.content}
        </DetailModal>
      </div>
    </div>
  )
}
